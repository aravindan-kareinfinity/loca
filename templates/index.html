<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>People Flow ‚Äî UI Shell</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <meta name="color-scheme" content="light" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Toggle (no JS) -->
    <input type="checkbox" id="sidebar-toggle" aria-hidden="true" />

    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" aria-label="Main navigation">
            <div class="brand">
                <div class="logo" aria-hidden="true">PF</div>
                <div class="name">People Flow</div>
            </div>

            <nav class="nav">
                <div class="section">Overview</div>
                <a class="item active" data-view="dashboard">
                    <span class="icon" aria-hidden="true">üè†</span>
                    <span class="label">Dashboard</span>
                </a>
                <a class="item" data-view="add-camera">
                    <span class="icon" aria-hidden="true">üì∑</span>
                    <span class="label">Add Camera</span>
                </a>
                <a class="item" data-view="live-view">
                    <span class="icon" aria-hidden="true">üü¢</span>
                    <span class="label">Live View</span>
                </a>
                <a class="item" data-view="reports">
                    <span class="icon" aria-hidden="true">üìÑ</span>
                    <span class="label">Reports</span>
                </a>
                <!--
                <a class="item" data-view="evacuation">
                    <span class="icon" aria-hidden="true">üö®</span>
                    <span class="label">Evacuation</span>
                </a>
                <a class="item" data-view="settings">
                    <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
                    <span class="label">Settings</span>
                </a>
                -->
            </nav>

            <div class="sidebar-footer">v0.1</div>
        </aside>

        <!-- Header -->
        <header class="header">
            <label class="toggle-btn" for="sidebar-toggle" title="Expand/Collapse sidebar">
                <span aria-hidden="true">‚ò∞</span>
                <span class="collapse-tip">Collapse</span>
            </label>
            <div class="actions">
                <button class="btn-primary">Go Live</button>
            </div>
        </header>

        <!-- Main Area -->
        <main class="main">
            <!-- Dashboard View -->
            <section class="view active" id="dashboard" aria-label="Dashboard">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 16px; gap: 8px;">
                    <div style="display:flex; align-items:center; gap: 12px;">
                        <label for="date-filter" style="font-weight: 600; font-size: 14px;">Filter by Date:</label>
                        <input type="date" id="date-filter" style="padding: 8px 12px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; font-size: 14px; background: #fff;">
                        <button id="btn-clear-date" style="background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); padding: 8px 12px; border-radius: 8px; font-size: 14px;">Today</button>
                    </div>
                    <div style="display:flex; gap: 8px;">
                        <button id="btn-dashboard-full" style="background: var(--primary-blue); color: #fff; border: 0; padding: 8px 12px; border-radius: 8px;">Full View</button>
                        <button id="btn-dashboard-exit" style="display:none; background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); padding: 8px 12px; border-radius: 8px;">Exit Full View</button>
                    </div>
                </div>
                <div class="cards">
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Total Cameras</div>
                        <div id="dash-total" style="font-size: 32px; font-weight: 700; color: var(--primary-blue);">0</div>
                    </article>
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Active Cameras</div>
                        <div id="dash-active" style="font-size: 32px; font-weight: 700; color: var(--success-green);">0</div>
                    </article>
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Inactive Cameras</div>
                        <div id="dash-inactive" style="font-size: 32px; font-weight: 700; color: var(--warning-red);">0</div>
                    </article>
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Total IN</div>
                        <div id="dash-in-total" style="font-size: 42px; font-weight: 800; color: var(--primary-blue);">0</div>
                    </article>
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Total OUT</div>
                        <div id="dash-out-total" style="font-size: 42px; font-weight: 800; color: var(--secondary-orange);">0</div>
                    </article>
                    <article class="card metric">
                        <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Remaining Inside</div>
                        <div id="dash-remaining" style="font-size: 48px; font-weight: 900; color: var(--success-green);">0</div>
                    </article>
                    <article class="card chart">
                        <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom: 8px;">
                            <div id="chart-title" style="font-weight:600;">People Flow Trend (Last 24 Hours)</div>
                            <div style="display:flex; gap:12px; font-size:12px;">
                                <div><span style="display:inline-block; width:10px; height:10px; background: var(--primary-blue); border-radius: 50%; margin-right:6px;"></span>IN</div>
                                <div><span style="display:inline-block; width:10px; height:10px; background: var(--secondary-orange); border-radius: 50%; margin-right:6px;"></span>OUT</div>
                            </div>
                        </div>
                        <div style="position: relative; height: 200px; width: 100%;">
                            <canvas id="people-flow-chart"></canvas>
                        </div>
                    </article>
                    <article class="card status">
                        <div style="font-weight: 600; margin-bottom: 8px;">Cameras</div>
                        <div id="dash-camera-list" style="display: grid; gap: 10px;"></div>
                    </article>
                </div>
            </section>

            <!-- Add Camera View -->
            <section class="view" id="add-camera" aria-label="Add Camera">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="display:flex; align-items:center; justify-content: space-between;">
                        <div style="font-size: 24px; font-weight: 700;">Cameras</div>
                        <div style="display:flex; gap:8px;">
                            <button id="btn-add-camera" class="btn-primary">Add Camera</button>
                            <button id="btn-search-camera" style="background: transparent; border: 1px solid rgba(0,0,0,0.1); padding: 10px 14px; border-radius: 10px;">Search Camera</button>
                        </div>
                    </div>

                    <!-- Camera List -->
                    <div id="camera-list" class="card" style="display:block;">
                        <div style="display: grid; gap: 12px;">
                            <!-- Cameras will be loaded here dynamically -->
                        </div>
                    </div>

                    <!-- Camera Form -->
                    <div id="camera-form" class="card" style="display:none; width: 100%;">
                        <div style="display: flex; flex-direction: column; gap: 16px;">
                            <div id="cam-preview-wrap" style="display:none; flex-direction: column; gap: 8px;">
                                <div style="font-weight:600;">Live Preview</div>
                                <div class="live-wrap-form" style="position:relative; width:100%; height: 300px;">
                                    <img id="cam-preview-img" class="live-img" alt="Preview" style="width:100%; height: 100%; object-fit: cover; border-radius: 8px; background:#000;"/>
                                    <canvas id="cam-preview-canvas" class="live-canvas" style="position:absolute; inset:0; border-radius:8px; pointer-events:none;"></canvas>
                                    <div class="live-tools" style="position:absolute; right:8px; top:8px; display:flex; gap:6px;">
                                        <button id="btn-form-tw-set" style="background: rgba(0,0,0,0.5); color:#fff; border:0; padding:6px 8px; border-radius:6px;">Set Tripwire</button>
                                        <button id="btn-form-tw-save" style="display:none; background: var(--primary-blue); color:#fff; border:0; padding:6px 8px; border-radius:6px;">Save</button>
                                        <button id="btn-form-tw-cancel" style="display:none; background: rgba(0,0,0,0.5); color:#fff; border:0; padding:6px 8px; border-radius:6px;">Cancel</button>
                                    </div>
                                </div>
                                <div id="cam-preview-note" style="font-size:12px; opacity:.7;">Preview available only when editing an existing, active camera.</div>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Camera Name / Label</label>
                                <input type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="e.g., Lobby Entrance">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Camera ID / Code</label>
                                <input type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="Unique internal identifier">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Location / Area</label>
                                <input type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="e.g., Building A, Floor 2">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Description</label>
                                <textarea rows="3" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; resize: vertical;" placeholder="Optional notes about coverage or purpose"></textarea>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 140px; gap: 12px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">IP Address / Hostname</label>
                                    <input id="cam-host" type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="e.g., 192.168.1.10 or cam.local">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Port</label>
                                    <input id="cam-port" type="number" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="80 or 554">
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Protocol Type</label>
                                    <select id="cam-protocol" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;">
                                        <option>RTSP</option>
                                        <option>ONVIF</option>
                                        <option>HTTP</option>
                                        <option>HTTPS</option>
                                        <option>RTMP</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">MAC Address</label>
                                    <input type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="e.g., AA:BB:CC:DD:EE:FF">
                                </div>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Stream Path</label>
                                <input id="cam-stream-path" type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="e.g., stream1 or h264">
                            </div>
                            <div class="card" style="grid-column: span 2; padding:12px; border:1px dashed rgba(0,0,0,0.1);">
                                <div style="font-weight:600; margin-bottom:8px;">Tripwire (Line Crossing)</div>
                                <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: end;">
                                    <label style="display:flex; align-items:center; gap:8px;">
                                        <input id="tw-enabled" type="checkbox"> Enable
                                    </label>
                                    <div></div>
                                    <div>
                                        <label style="display:block; margin-bottom:6px; font-weight:600;">X1,Y1</label>
                                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px;">
                                            <input id="tw-x1" type="number" min="0" placeholder="x1" style="padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                            <input id="tw-y1" type="number" min="0" placeholder="y1" style="padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                        </div>
                                    </div>
                                    <div>
                                        <label style="display:block; margin-bottom:6px; font-weight:600;">X2,Y2</label>
                                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:8px;">
                                            <input id="tw-x2" type="number" min="0" placeholder="x2" style="padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                            <input id="tw-y2" type="number" min="0" placeholder="y2" style="padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                        </div>
                                    </div>
                                    <div>
                                        <label style="display:block; margin-bottom:6px; font-weight:600;">IN Direction</label>
                                        <select id="tw-direction" style="width:100%; padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                            <option value="AtoBIsIn">A ‚Üí B is IN</option>
                                            <option value="BtoAIsIn">B ‚Üí A is IN</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="display:block; margin-bottom:6px; font-weight:600;">Count Mode</label>
                                        <select id="tw-countmode" style="width:100%; padding:8px; border:1px solid rgba(0,0,0,0.1); border-radius:8px;">
                                            <option value="BOTH">Count IN & OUT</option>
                                            <option value="IN">Count IN only</option>
                                            <option value="OUT">Count OUT only</option>
                                        </select>
                                    </div>
                                </div>
                                <div style="font-size:12px; opacity:.7; margin-top:8px;">When enabled, IN/OUT is decided by movement across the line from A (X1,Y1) to B (X2,Y2) using the selected direction.</div>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Streaming URL / RTSP URL</label>
                                <input id="cam-stream-url" type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="rtsp://username:password@192.168.1.10:554/stream1">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Mode</label>
                                <select id="cam-mode" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;">
                                    <option>Recognize</option>
                                    <option>Identify</option>
                                    <option>Recognize and Identify</option>
                                </select>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Username</label>
                                    <input id="cam-username" type="text" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="Username">
                                </div>
                                <div>
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Password</label>
                                    <input id="cam-password" type="password" style="width: 100%; padding: 10px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px;" placeholder="Password">
                                </div>
                            </div>
                            <div style="display: flex; gap: 12px; margin-top: 16px;">
                                <button id="btn-save-camera" class="btn-primary">Save</button>
                                <button id="btn-cancel-camera" style="background: transparent; border: 1px solid rgba(0,0,0,0.1); padding: 10px 14px; border-radius: 10px;">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Live View -->
            <section class="view" id="live-view" aria-label="Live View">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="font-size: 24px; font-weight: 700;">Live Camera Feeds</div>
                    <div id="live-cards" class="cards"></div>
                </div>
            </section>

            <!-- Reports View -->
            <section class="view" id="reports" aria-label="Reports">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="font-size: 24px; font-weight: 700;">Reports & Analytics</div>
                    <div class="cards">
                        <article class="card" style="grid-column: span 12;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <div style="font-weight: 600;">Presence Events (Live)</div>
                                <div style="display:flex; gap:8px;">
                                    <button id="btn-refresh-presence" class="btn-primary">Refresh</button>
                                  
                                </div>
                            </div>
                            <div id="presence-summary" style="display:flex; gap:16px; margin-bottom:12px;">
                                <div style="background: rgba(32,114,187,0.08); padding: 8px 12px; border-radius: 8px;">IN: <b id="presence-in">0</b></div>
                                <div style="background: rgba(227,151,99,0.15); padding: 8px 12px; border-radius: 8px;">OUT: <b id="presence-out">0</b></div>
                                <div style="background: rgba(0,0,0,0.05); padding: 8px 12px; border-radius: 8px;">Total: <b id="presence-total">0</b></div>
                            </div>
                            <div style="max-height: 300px; overflow:auto; border:1px solid rgba(0,0,0,0.08); border-radius:8px;">
                                <table style="width:100%; border-collapse: collapse; font-size: 14px;">
                                    <thead>
                                        <tr style="background: rgba(0,0,0,0.03);">
                                            <th style="text-align:left; padding:8px;">Time</th>
                                            <th style="text-align:left; padding:8px;">Camera</th>
                                            <th style="text-align:left; padding:8px;">Event</th>
                                            <th style="text-align:left; padding:8px;">Image</th>
                                        </tr>
                                    </thead>
                                    <tbody id="presence-tbody"></tbody>
                                </table>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 12;">
                            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                                <div style="font-weight:600;">People (Rename)</div>
                                <button id="btn-refresh-people" class="btn-primary">Refresh</button>
                            </div>
                            <div id="people-list" style="display:grid; gap:8px;"></div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">Peak Hours Analysis</div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <div style="display: flex; flex-direction: column; gap: 8px;">
                                    <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Peak Entry Time</div>
                                    <div id="peak-entry-time" style="font-size: 24px; font-weight: 700;">--</div>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 8px;">
                                    <div style="font-size: 12px; text-transform: uppercase; opacity: .7;">Peak Exit Time</div>
                                    <div id="peak-exit-time" style="font-size: 24px; font-weight: 700;">--</div>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">Camera Performance</div>
                            <div id="camera-performance-list" style="display: grid; gap: 12px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Loading...</span>
                                    <span style="color: rgba(0,0,0,0.3); font-weight:600;">--</span>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <!-- Evacuation View -->
            <section class="view" id="evacuation" aria-label="Evacuation">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="font-size: 24px; font-weight: 700;">Evacuation Management</div>
                        <div style="display: flex; gap: 8px;">
                            <button id="btn-trigger-evacuation" class="btn-primary" style="background: var(--warning-red);">üö® Trigger Evacuation</button>
                            <button id="btn-reset-evacuation" style="background: transparent; border: 1px solid rgba(0,0,0,0.1); padding: 10px 14px; border-radius: 10px;">Reset</button>
                        </div>
                    </div>
                    <div class="cards">
                        <article class="card" style="grid-column: span 12;">
                            <div style="font-weight: 600; margin-bottom: 16px;">Evacuation Status</div>
                            <div id="evacuation-status" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                                <div style="background: rgba(40,167,69,0.1); padding: 16px; border-radius: 8px; border-left: 4px solid var(--success-green);">
                                    <div style="font-size: 12px; text-transform: uppercase; opacity: .7; margin-bottom: 8px;">Status</div>
                                    <div style="font-size: 24px; font-weight: 700; color: var(--success-green);">Normal</div>
                                </div>
                                <div style="background: rgba(0,0,0,0.05); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 12px; text-transform: uppercase; opacity: .7; margin-bottom: 8px;">People Count</div>
                                    <div id="evac-people-count" style="font-size: 24px; font-weight: 700; color: var(--text-struct);">0</div>
                                </div>
                                <div style="background: rgba(0,0,0,0.05); padding: 16px; border-radius: 8px;">
                                    <div style="font-size: 12px; text-transform: uppercase; opacity: .7; margin-bottom: 8px;">Last Updated</div>
                                    <div id="evac-last-update" style="font-size: 14px; font-weight: 600; color: var(--text-struct);">--</div>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 12;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <div style="font-weight: 600;">Real-time People Location</div>
                                <div style="display: flex; gap: 8px;">
                                    <button id="btn-refresh-evac-people" class="btn-primary" style="padding: 8px 12px; font-size: 14px;">Refresh</button>
                                    <button id="btn-toggle-json-view" style="background: transparent; border: 1px solid rgba(0,0,0,0.1); padding: 8px 12px; border-radius: 10px; font-size: 14px;">üìÑ JSON View</button>
                                </div>
                            </div>
                            <!-- Table View -->
                            <div id="evacuation-people-table" style="display: block;">
                                <div style="max-height: 500px; overflow-y: auto; border: 1px solid rgba(0,0,0,0.08); border-radius: 8px;">
                                    <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                                        <thead>
                                            <tr style="background: rgba(0,0,0,0.03); position: sticky; top: 0; z-index: 1;">
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Photo</th>
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Person ID</th>
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Name</th>
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Last Seen</th>
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Location</th>
                                                <th style="text-align: left; padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.08);">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody id="evacuation-people-tbody">
                                            <tr>
                                                <td colspan="6" style="padding: 24px; text-align: center; opacity: 0.7;">Loading people data...</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!-- JSON View -->
                            <div id="evacuation-json-view" style="display: none;">
                                <div style="background: #1e1e1e; color: #d4d4d4; padding: 16px; border-radius: 8px; max-height: 500px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 12px;">
                                    <pre id="evacuation-json-data" style="margin: 0; white-space: pre-wrap; word-wrap: break-word;">{}</pre>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">Evacuation Zones</div>
                            <div style="display: grid; gap: 12px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.03); border-radius: 8px;">
                                    <div>
                                        <div style="font-weight: 600;">Main Entrance</div>
                                        <div style="font-size: 12px; opacity: .7;">Zone 1 - Primary Exit</div>
                                    </div>
                                    <div style="padding: 4px 12px; background: var(--success-green); color: #fff; border-radius: 999px; font-size: 12px; font-weight: 600;">Clear</div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.03); border-radius: 8px;">
                                    <div>
                                        <div style="font-weight: 600;">Back Door</div>
                                        <div style="font-size: 12px; opacity: .7;">Zone 2 - Secondary Exit</div>
                                    </div>
                                    <div style="padding: 4px 12px; background: var(--success-green); color: #fff; border-radius: 999px; font-size: 12px; font-weight: 600;">Clear</div>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: rgba(0,0,0,0.03); border-radius: 8px;">
                                    <div>
                                        <div style="font-weight: 600;">Loading Dock</div>
                                        <div style="font-size: 12px; opacity: .7;">Zone 3 - Emergency Exit</div>
                                    </div>
                                    <div style="padding: 4px 12px; background: var(--success-green); color: #fff; border-radius: 999px; font-size: 12px; font-weight: 600;">Clear</div>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">Evacuation History</div>
                            <div id="evacuation-history" style="display: grid; gap: 12px; max-height: 300px; overflow-y: auto;">
                                <div style="padding: 12px; background: rgba(0,0,0,0.03); border-radius: 8px; border-left: 4px solid rgba(0,0,0,0.1);">
                                    <div style="font-size: 12px; opacity: .7;">No evacuation events recorded</div>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>

            <!-- Settings View -->
            <section class="view" id="settings" aria-label="Settings">
                <div style="display: flex; flex-direction: column; gap: 16px;">
                    <div style="font-size: 24px; font-weight: 700;">System Settings</div>
                    <div class="cards">
                        <article class="card" style="grid-column: span 12;">
                            <div style="font-weight: 600; margin-bottom: 16px;">General Settings</div>
                            <div style="display: grid; gap: 16px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Automatic Reports</div>
                                        <div style="font-size: 14px; opacity: 0.7;">Generate daily reports automatically</div>
                                    </div>
                                    <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                                        <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                                        <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--primary-blue); transition: .4s; border-radius: 24px;"></span>
                                        <span style="position: absolute; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Email Notifications</div>
                                        <div style="font-size: 14px; opacity: 0.7;">Receive alerts via email</div>
                                    </div>
                                    <label style="position: relative; display: inline-block; width: 44px; height: 24px;">
                                        <input type="checkbox" style="opacity: 0; width: 0; height: 0;">
                                        <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px;"></span>
                                        <span style="position: absolute; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                                    </label>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Data Retention</div>
                                        <div style="font-size: 14px; opacity: 0.7;">How long to keep historical data</div>
                                    </div>
                                    <select style="padding: 8px 12px; border: 1px solid rgba(0,0,0,0.1); border-radius: 6px;">
                                        <option>30 days</option>
                                        <option>90 days</option>
                                        <option>1 year</option>
                                        <option>Indefinitely</option>
                                    </select>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">User Management</div>
                            <div style="display: grid; gap: 12px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Admin User</div>
                                        <div style="font-size: 14px; opacity: 0.7;">Full system access</div>
                                    </div>
                                    <button style="background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); padding: 6px 12px; border-radius: 6px;">Edit</button>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">Viewer User</div>
                                        <div style="font-size: 14px; opacity: 0.7;">Read-only access</div>
                                    </div>
                                    <button style="background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.1); padding: 6px 12px; border-radius: 6px;">Edit</button>
                                </div>
                            </div>
                        </article>
                        <article class="card" style="grid-column: span 6;">
                            <div style="font-weight: 600; margin-bottom: 16px;">System Information</div>
                            <div style="display: grid; gap: 12px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Version</span>
                                    <span style="font-weight:600;">v0.1.2</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Last Updated</span>
                                    <span style="font-weight:600;">2023-11-15</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Database Size</span>
                                    <span style="font-weight:600;">245 MB</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span>Active Cameras</span>
                                    <span style="font-weight:600;">2/3</span>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>